/*! LAB.js (LABjs :: Loading And Blocking JavaScript)
    v2.0.3 (c) Kyle Simpson
    MIT License
*/
/*!
	Manual Cache Buster Parameter Variant
	Alex Chittock for Anobii.com
*/
(function(q){var u=q.$LAB,j="UseLocalXHR",p="AlwaysPreserveOrder",m="AllowDuplicates",l="CacheBust",z="CacheBustKey"
/*!START_DEBUG*/
,k="Debug"
/*!END_DEBUG*/
,e="BasePath",r=/^[^?#]*\//.exec(location.href)[0],C=/^\w+\:\/\/\/?[^\/]+/.exec(r)[0],f=document.head||document.getElementsByTagName("head"),h=(q.opera&&Object.prototype.toString.call(q.opera)=="[object Opera]")||("MozAppearance" in document.documentElement.style)
/*!START_DEBUG*/
,c=function(){},n=c
/*!END_DEBUG*/
,A=document.createElement("script"),a=typeof A.preload=="boolean",w=a||(A.readyState&&A.readyState=="uninitialized"),x=!w&&A.async===true,y=!w&&!x&&!h;
/*!START_DEBUG*/
if(q.console&&q.console.log){if(!q.console.error){q.console.error=q.console.log}c=function(D){q.console.log(D)};n=function(E,D){q.console.error(E,D)};
/*!END_DEBUG*/
}function t(D){return Object.prototype.toString.call(D)=="[object Function]"}function B(D){return Object.prototype.toString.call(D)=="[object Array]"}function g(F,E){var D=/^\w+\:\/\//;if(/^\/\/\/?/.test(F)){F=location.protocol+F}else{if(!D.test(F)&&F.charAt(0)!="/"){F=(E||"")+F}}return D.test(F)?F:((F.charAt(0)=="/"?C:r)+F)}function i(E,F){for(var D in E){if(E.hasOwnProperty(D)){F[D]=E[D]}}return F}function b(E){var F=false;for(var D=0;D<E.scripts.length;D++){if(E.scripts[D].ready&&E.scripts[D].exec_trigger){F=true;E.scripts[D].exec_trigger();E.scripts[D].exec_trigger=null}}return F}function d(F,E,D,G){F.onload=F.onreadystatechange=function(){if((F.readyState&&F.readyState!="complete"&&F.readyState!="loaded")||E[D]){return}F.onload=F.onreadystatechange=null;G()}}function v(D){D.ready=D.finished=true;for(var E=0;E<D.finished_listeners.length;E++){D.finished_listeners[E]()}D.ready_listeners=[];D.finished_listeners=[]}function s(F,G,E,H,D){setTimeout(function(){var I,K=G.real_src,J;if("item" in f){if(!f[0]){setTimeout(arguments.callee,25);return}f=f[0]}I=document.createElement("script");if(G.type){I.type=G.type}if(G.charset){I.charset=G.charset}if(D){if(w){
/*!START_DEBUG*/
if(F[k]){c("start script preload: "+K);
/*!END_DEBUG*/
}E.elem=I;if(a){I.preload=true;I.onpreload=H}else{I.onreadystatechange=function(){if(I.readyState=="loaded"){H()}}}I.src=K}else{if(D&&K.indexOf(C)==0&&F[j]){J=new XMLHttpRequest();
/*!START_DEBUG*/
if(F[k]){c("start script preload (xhr): "+K);
/*!END_DEBUG*/
}J.onreadystatechange=function(){if(J.readyState==4){J.onreadystatechange=function(){};E.text=J.responseText+"\n//@ sourceURL="+K;H()}};J.open("GET",K);J.send()}else{
/*!START_DEBUG*/
if(F[k]){c("start script preload (cache): "+K);
/*!END_DEBUG*/
}I.type="text/cache-script";d(I,E,"ready",function(){f.removeChild(I);H()});I.src=K;f.insertBefore(I,f.firstChild)}}}else{if(x){
/*!START_DEBUG*/
if(F[k]){c("start script load (ordered async): "+K);
/*!END_DEBUG*/
}I.async=false;d(I,E,"finished",H);I.src=K;f.insertBefore(I,f.firstChild)}else{
/*!START_DEBUG*/
if(F[k]){c("start script load: "+K);
/*!END_DEBUG*/
}d(I,E,"finished",H);I.src=K;f.insertBefore(I,f.firstChild)}}},0)}function o(){var F={},K=w||y,D=[],E={},H;F[j]=true;F[p]=false;F[m]=false;F[l]=false;F[z]=false;
/*!START_DEBUG*/
F[k]=false;
/*!END_DEBUG*/
F[e]="";function J(N,P,M){var L;function O(){if(L!=null){L=null;v(M)}}if(E[P.src].finished){return}if(!N[m]){E[P.src].finished=true}L=M.elem||document.createElement("script");if(P.type){L.type=P.type}if(P.charset){L.charset=P.charset}d(L,M,"finished",O);if(M.elem){M.elem=null}else{if(M.text){L.onload=L.onreadystatechange=null;L.text=M.text}else{L.src=P.real_src}}f.insertBefore(L,f.firstChild);if(M.text){O()}}function G(N,R,Q,L){var M,P,O=function(){R.ready_cb(R,function(){J(N,R,M)})},S=function(){R.finished_cb(R,Q)};R.src=g(R.src,N[e]);R.real_src=R.src+(N[l]?((/\?.*$/.test(R.src)?"&_":"?_")+(N[z]?N[z]:~~(Math.random()*1000000000))+"="):"");if(!E[R.src]){E[R.src]={items:[],finished:false}}P=E[R.src].items;if(N[m]||P.length==0){M=P[P.length]={ready:false,finished:false,ready_listeners:[O],finished_listeners:[S]};s(N,R,M,((L)?function(){M.ready=true;for(var T=0;T<M.ready_listeners.length;T++){M.ready_listeners[T]()}M.ready_listeners=[]}:function(){v(M)}),L)}else{M=P[0];if(M.finished){S()}else{M.finished_listeners.push(S)}}}function I(){var O,S=i(F,{}),L=[],N=0,P=false,R;function U(W,V){
/*!START_DEBUG*/
if(S[k]){c("script preload finished: "+W.real_src);
/*!END_DEBUG*/
}W.ready=true;W.exec_trigger=V;M()}function T(X,W){
/*!START_DEBUG*/
if(S[k]){c("script execution finished: "+X.real_src);
/*!END_DEBUG*/
}X.ready=X.finished=true;X.exec_trigger=null;for(var V=0;V<W.scripts.length;V++){if(!W.scripts[V].finished){return}}W.finished=true;M()}function M(){while(N<L.length){if(t(L[N])){
/*!START_DEBUG*/
if(S[k]){c("$LAB.wait() executing: "+L[N]);
/*!END_DEBUG*/
}try{L[N++]()}catch(V){
/*!START_DEBUG*/
if(S[k]){n("$LAB.wait() error caught: ",V);
/*!END_DEBUG*/
}}continue}else{if(!L[N].finished){if(b(L[N])){continue}break}}N++}if(N==L.length){P=false;R=false}}function Q(){if(!R||!R.scripts){L.push(R={scripts:[],finished:true})}}O={script:function(){for(var V=0;V<arguments.length;V++){(function(Z,X){var Y;if(!B(Z)){X=[Z]}for(var W=0;W<X.length;W++){Q();Z=X[W];if(t(Z)){Z=Z()}if(!Z){continue}if(B(Z)){Y=[].slice.call(Z);Y.unshift(W,1);[].splice.apply(X,Y);W--;continue}if(typeof Z=="string"){Z={src:Z}}Z=i(Z,{ready:false,ready_cb:U,finished:false,finished_cb:T});R.finished=false;R.scripts.push(Z);G(S,Z,R,(K&&P));P=true;if(S[p]){O.wait()}}})(arguments[V],arguments[V])}return O},wait:function(){if(arguments.length>0){for(var V=0;V<arguments.length;V++){L.push(arguments[V])}R=L[L.length-1]}else{R=false}M();return O}};return{script:O.script,wait:O.wait,setOptions:function(V){i(V,S);return O}}}H={setGlobalDefaults:function(L){i(L,F);return H},setOptions:function(){return I().setOptions.apply(null,arguments)},script:function(){return I().script.apply(null,arguments)},wait:function(){return I().wait.apply(null,arguments)},queueScript:function(){D[D.length]={type:"script",args:[].slice.call(arguments)};return H},queueWait:function(){D[D.length]={type:"wait",args:[].slice.call(arguments)};return H},runQueue:function(){var N=H,L=D.length,M=L,O;for(;--M>=0;){O=D.shift();N=N[O.type].apply(null,O.args)}return N},noConflict:function(){q.$LAB=u;return H},sandbox:function(){return o()}};return H}q.$LAB=o();(function(F,D,E){if(document.readyState==null&&document[F]){document.readyState="loading";document[F](D,E=function(){document.removeEventListener(D,E,false);document.readyState="complete"},false)}})("addEventListener","DOMContentLoaded")})(this);